<!-- Purpose: This file will contain the HTML structure for the Analytics interface, accessible only by managers. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Leads - Prospect Qualification</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<!-- Navbar -->
<nav id="navbar">
    <ul>
        <!-- Show the role on the left side -->
        <li style="float: left; background-color: #007bff; color: white; padding: 8px 25px; list-style: none;">
            <div> Role: {{ role }} </div>
            <div> Nickname: {{ nickname }} </div>
        </li>

        <!-- Menu links to the other pages -->
        {% if role != 'Manager' %}
        <li style="float: right;"><a href="{{ url_for('data_collection') }}">Data Collection</a></li>
        {% endif %}
        {% if role != 'Manager' %}
        <li style="float: right;"><a href="{{ url_for('field_support') }}">Field Support</a></li>
        {% endif %}
        {% if role != 'Canvasser' %}
        <li style="float: right;"><a href="{{ url_for('prospect_qualification') }}">Prospect Qualification</a></li>
        {% endif %}
        {% if role == 'Manager' %}
        <li style="float: right;"><a href="{{ url_for('analytics') }}">Analytics</a></li>
        {% endif %}
        <li style="float: right;"><a href="{{ url_for('role_selection') }}">Change Role</a></li>
    </ul>
</nav>
<body>
    <div class="flex-container">
        <h1>Prospect Qualification Page</h1>
        <h2>Prospect Personas</h2>
        <p class="data-tip"><strong>Tip:</strong> This table compares the characteristics of the 'Best Prospects' (those most likely to set appointments) with the 'Worst Prospects' (those most likely to decline). Use these insights to refine your targeting and approach.</p>
        <div class="table-wrapper">
            <table border="1">
                <thead>
                    <tr>
                        <th>Characteristic</th>
                        <th>Best Prospect</th>
                        <th>Worst Prospect</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Solar Panels on Roof</td>
                        <td id="best-solar-panels"></td>
                        <td id="worst-solar-panels"></td>
                    </tr>
                    <tr>
                        <td>Roof Type & Condition</td>
                        <td id="best-roof-condition"></td>
                        <td id="worst-roof-condition"></td>
                    </tr>
                    <tr>
                        <td>Shading Issues</td>
                        <td id="best-shading-issues"></td>
                        <td id="worst-shading-issues"></td>
                    </tr>
                    <tr>
                        <td>Appliances & House Characteristics</td>
                        <td id="best-appliances"></td>
                        <td id="worst-appliances"></td>
                    </tr>
                    <tr>
                        <td>Avg. Quarterly Electricity Bill Estimate ($)</td>
                        <td id="best-electricity-bill"></td>
                        <td id="worst-electricity-bill"></td>
                    </tr>
                    <tr>
                        <td>Number of Decision Makers</td>
                        <td id="best-decision-makers"></td>
                        <td id="worst-decision-makers"></td>
                    </tr>
                    <tr>
                        <td>Approximate Age of Decision Maker(s)</td>
                        <td id="best-age"></td>
                        <td id="worst-age"></td>
                    </tr>
                    <tr>
                        <td>Number of Inhabitants in the House</td>
                        <td id="best-inhabitants"></td>
                        <td id="worst-inhabitants"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h2>Prospects' Data Distribution</h2>
        <p class="data-tip"><strong>Tip:</strong> Use the dropdown to select different fields and analyze their distribution across prospect responses. Click on an element in the Legend to exclude/include it in the chart.</p>
        <div class="chart-container">
            <div class="chart-controls">
                <select id="field-select">
                    <option value="solar_panels_on_roof">Solar Panels on Roof</option>
                    <option value="roof_type_condition">Roof Type & Condition</option>
                    <option value="shading_issues">Shading Issues</option>
                    <option value="appliances">Appliances</option>
                    <option value="electricity_bill_estimate">Electricity Bill Estimate</option>
                    <option value="number_of_decision_makers">Number of Decision Makers</option>
                    <option value="approximate_age">Approximate Age</option>
                    <option value="number_inhabitants">Number of Inhabitants</option>
                </select>
            </div>
            <div class="chart-wrapper">
                <canvas id="prospectsDataDistributionChart"></canvas>
            </div>
        </div>
        
 
        <h2>Initiatives to improve leads</h2> 
        <p class="data-tip"><strong>Tip:</strong> Try to insert your initiative.</p>
        <!-- There are 3 buckets: Succesful, Current and Unsuccesfull Initiatives.
         For each bucket, Create a structure containing different tasks that can be saved and visualized, of which you can change order through drag & drop, that with two buttons you can or eliminate definitively or move in another bucket
         Each element contains the problem the initiative addresses (as a colored tag), its title , a brief description, a timeline, an estimation of costs and of people to involve -->
    
    </div>
</body>
</html>
